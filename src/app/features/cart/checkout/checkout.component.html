<div class="container mx-auto mt-12 min-h-screen">
    <h1 class="mb-4 sm:mx-0 mx-4">
      <span class="text-3xl font-bold text-brand-color">Checkout </span>
      <span class="text-xl font-medium text-fourth-color">({{cartService.getCartItemCount()}} items in cart)</span>
    </h1>
  
    <div class="checkout-layout">
      <!-- Shipping Info -->
      <div class="billing-details">
        <h2>Shipping Info</h2>
        <form [formGroup]="checkoutForm" (ngSubmit)="placeOrder()">
          <div class="form-group">
            <input type="text" id="phone" formControlName="phone" placeholder="Phone number" [ngClass]="{'invalid': f['phone'].touched && f['phone'].invalid}">
            <div class="error-message" *ngIf="f['phone'].touched && f['phone'].invalid">Valid phone number required</div>
          </div>
  
          <div class="form-row">
            <div class="form-group">
              <input type="text" id="city" formControlName="city" placeholder="City" [ngClass]="{'invalid': f['city'].touched && f['city'].invalid}">
              <div class="error-message" *ngIf="f['city'].touched && f['city'].invalid">Required</div>
            </div>
  
            <div class="form-group">
              <input type="text" id="postalcode" formControlName="postalcode" placeholder="Postal code" [ngClass]="{'invalid': f['postalcode'].touched && f['postalcode'].invalid}">
              <div class="error-message" *ngIf="f['postalcode'].touched && f['postalcode'].invalid">Required</div>
            </div>
          </div>
  
          <div class="form-group">
            <textarea id="details" formControlName="details" placeholder="Additional delivery notes (optional)" rows="4"></textarea>
          </div>
        </form>
      </div>
  
      <!-- Order Summary Section -->
      <div class="order-summary relative">
        <h2>Order Summary</h2>
        <app-section-spinner *ngIf="isLoading"/>
        <div class="cart-items mb-5">
          <ng-container *ngIf="cartService.cart$ | async as cart">
            <app-cart-item *ngFor="let item of cart.cartItems" [item]="item" (quantityChange)="updateQuantity($event, item)" (removeItem)="removeItem(item)" />
          </ng-container>
        </div>
  
        <div class="summary-calculations">
          <div class="summary-row">
            <span>Subtotal ({{cartService.getCartItemCount()}} items)</span>
            <span class="amount">EGP {{subtotal.toFixed(2)}}</span>
          </div>
          <div class="summary-row">
            <span>Shipping Fee</span>
            <span class="shipping-free">FREE</span>
          </div>
          <div class="summary-row total-row">
            <span>Total <span class="vat-text">(Inclusive of VAT)</span></span>
            <span class="total-amount">EGP {{total.toFixed(2)}}</span>
          </div>
        </div>
  
        <div class="payment-methods">
          <div class="payment-option">
            <label>
              <input type="radio" name="payment" [(ngModel)]="paymentMethod" value="cod">
              <span class="payment-label">Cash on delivery</span>
              <span class="payment-description" *ngIf="paymentMethod === 'cod'">Pay with cash upon delivery.</span>
            </label>
          </div>
  
          <div class="payment-option">
            <label>
              <input type="radio" name="payment" [(ngModel)]="paymentMethod" value="online" disabled>
              <span class="payment-label">Pay Online <span class="coming-soon-badge">Coming Soon</span></span>
            </label>
          </div>
        </div>
  
        <button type="button" class="place-order-button" (click)="placeOrder()">Place Order</button>
      </div>
    </div>
  </div> 